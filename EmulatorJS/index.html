                div.style.height = "100%";
                div.style.position = "relative";
                div.appendChild(sub);
                document.getElementById('display').innerHTML = "";
                document.getElementById('display').appendChild(div);

                script.src = `https://cdn.jsdelivr.net/npm/@emulator/${core}/dist/${core}.js`;
                script.onload = () => {
                    // Inicializar el emulador después de cargar el script
                    const game = document.createElement("script");
                    game.src = URL.createObjectURL(new Blob([`
                        const ${core} = new ${core}Engine({
                            canvas: document.getElementById('game'),
                            debug: ${enableDebug},
                            threads: ${enableThreads},
                        });
                        ${core}.loadROM('${URL.createObjectURL(file)}');
                    `], { type: 'application/javascript' }));
                    game.onload = () => hideLoading(); // Ocultar el cuadro de carga después de cargar el juego
                    document.body.appendChild(game);
                };
                document.body.appendChild(script);
            };
            input.click();
        });

        // Manejador de búsqueda
        document.getElementById('search-box').addEventListener('input', (event) => {
            console.log(`Buscando ROM: ${event.target.value}`);
            // Implementa la funcionalidad de búsqueda aquí si es necesario
        });
    </script>
</body>
</html>
