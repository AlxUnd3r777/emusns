<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emulador Popular</title>
    <link rel="icon" href="docs/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">
    <style>
        /* Estilos Generales */
        body, html {
            height: 100%;
            margin: 0;
            overflow-x: hidden;
            background: linear-gradient(90deg, #0f0c29, #302b63, #24243e); /* Fondo psicodélico */
            font-family: 'Press Start 2P', cursive; /* Fuente de estilo retro */
            color: #fff;
        }

        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        /* Estilo del Menú de Navegación */
        nav {
            background-color: rgba(0, 0, 0, 0.8);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: center;
            padding: 10px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
        }

        nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            margin: 0 15px;
        }

        nav ul li a {
            color: #00ff00;
            text-decoration: none;
            font-size: 16px;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: #ff0000;
        }

        /* Título Parpadeante */
        #top h1 {
            animation: blink 1s infinite alternate-reverse, glitch 0.5s infinite;
            text-align: center;
            margin-top: 70px; /* Ajuste para que no se superponga al menú */
        }

        /* Animación Parpadeante */
        @keyframes blink {
            0% { color: #39ff14; } /* Verde fluorescente */
            33% { color: #ff00ff; } /* Magenta */
            66% { color: #ff4500; } /* Rojo escarlata */
            100% { color: #00ffff; } /* Cian */
        }

        /* Animación de Glitch */
        @keyframes glitch {
            0% { transform: skew(5deg, 0deg); text-shadow: -2px 2px 0 #00ff00, 2px -2px 0 #ff0000; }
            50% { transform: skew(-5deg, 0deg); text-shadow: -2px 2px 0 #ff00ff, 2px -2px 0 #00ffff; }
            100% { transform: skew(5deg, 0deg); text-shadow: -2px 2px 0 #00ffff, 2px -2px 0 #ff00ff; }
        }

        /* Estilo del Spinner */
        #spinner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 16px solid #fff;
            border-top: 16px solid #ffcc00;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 1.5s linear infinite;
            z-index: 1000;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Estilos para Contenido Principal */
        #box {
            margin-top: 120px; /* Ajustar el margen superior para evitar superposición */
            text-align: center;
            color: #ffcc00;
            font-size: 18px;
            animation: colorChange 5s infinite;
        }

        @keyframes colorChange {
            0%, 100% { color: #ffcc00; }
            50% { color: #f1c40f; }
        }

        button, select {
            padding: 10px 15px;
            margin: 10px;
            font-size: 16px;
            color: #fff;
            background-color: #3498db;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        button:hover, select:hover {
            background-color: #2980b9;
            transform: translateY(-4px);
        }
    </style>
</head>
<body>

<!-- Spinner de Carga -->
<div id="spinner"></div>

<!-- Menú de Navegación -->
<nav>
    <ul>
        <li><a href="https://alxund3r777.github.io/portafolio/" target="_blank">Inicio</a></li>
        <li><a href="######" target="_blank">Contacto</a></li>
        <li><a href="https://www.emulatorgames.net/roms/" target="_blank">Juegos</a></li>
    </ul>
</nav>

<!-- Contenido Principal -->
<div id="top">
    <h1>Emulador Popular</h1>
    <img src="https://i.ibb.co/BqbGpLn/pngwing-com.png" alt="Logo" class="logo">
</div>
<div id="box">
    <input type="file" id="input">
    <p>¡Pesca la ROM y chántala aquí, mano!</p>
</div>

<script>
    // JavaScript para cargar y manejar la ROM
    const spinner = document.getElementById('spinner');
    const input = document.getElementById('input');

    input.onchange = async () => {
        spinner.style.display = 'block'; // Mostrar spinner

        const url = input.files[0];
        const parts = input.files[0].name.split(".");
        const core = await (async (ext) => {
            if (["fds", "nes", "unif", "unf"].includes(ext)) return "nes";
            if (["smc", "fig", "sfc", "gd3", "gd7", "dx2", "bsx", "swc"].includes(ext)) return "snes";
            if (["z64", "n64"].includes(ext)) return "n64";
            if (["pce"].includes(ext)) return "pce";
            return "generic";
        })(parts.pop());

        const div = document.createElement("div");
        const sub = document.createElement("div");
        const script = document.createElement("script");

        sub.id = "game";
        div.id = "display";

        const top = document.getElementById("top");
        top.remove();
        document.body.appendChild(div);
        div.appendChild(sub);

        window.EJS_player = "#game";
        window.EJS_gameName = parts.shift();
        window.EJS_core = core;
        window.EJS_pathtodata = "data/";
        window.EJS_startOnLoaded = true;

        script.src = "data/loader.js";
        document.body.appendChild(script);

        script.onload = () => {
            spinner.style.display = 'none'; // Ocultar spinner
        };
    };
</script>

</body>
</html>
